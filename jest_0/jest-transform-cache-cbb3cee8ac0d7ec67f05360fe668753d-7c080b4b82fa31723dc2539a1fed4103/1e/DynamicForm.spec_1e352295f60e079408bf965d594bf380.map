{"version":3,"sources":["DynamicForm.spec.js"],"names":["chance","Chance","randomType","integer","createRandomOptions","options","numberOfOptions","counter","word","generateTestFormJson","name","jsonForm","numberOfFields","fields","type","field","id","validation","placeholder","describe","wrapper","setRequest","jest","fn","testJson","route","renderComponent","Object","keys","beforeEach","it","expect","toEqual","Segment","props","padded","toBeTruthy","header","childAt","Header","size","debug","Form","forEach","fail","count","form","segmentOfFields","label","text","Checkbox","Radio","state","errors","setState","update","find","InlineErrorComponent","TextArea","Dropdown","Input","submitSegment","button","Button"],"mappings":"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","file":"DynamicForm.spec.js","sourcesContent":["import React from 'react';\nimport {\n  Button,\n  Form,\n  Segment,\n  Header,\n  Radio,\n  Checkbox,\n  TextArea,\n  Dropdown,\n  Input,\n} from 'semantic-ui-react';\nimport { shallow } from 'enzyme';\nimport { Chance } from 'chance';\nimport DynamicFormComponent from '../../../src/components/helpers/DynamicForm';\nimport InlineErrorComponent from '../../../src/components/helpers/InlineError';\n\nconst chance = new Chance();\n\nconst randomType = () => {\n  switch (chance.integer() % 4) {\n    case 0:\n      return 'textArea';\n    case 1:\n      return 'radio';\n    case 2:\n      return 'checkbox';\n    case 3:\n      return 'input';\n    default:\n      return 'textArea';\n  }\n};\n\nconst createRandomOptions = () => {\n  const options = [];\n  const numberOfOptions = (chance.integer() % 11) + 1;\n  for (let counter = 0; counter < numberOfOptions; counter += 1) {\n    options[counter] = chance.word();\n  }\n  return options;\n};\n\nconst generateTestFormJson = () => {\n  const name = chance.word();\n  const jsonForm = {};\n  const numberOfFields = (chance.integer() % 11) + 1;\n  const fields = [];\n  for (let counter = 0; counter < numberOfFields; counter += 1) {\n    const type = randomType();\n\n    const field = {\n      name: chance.word(),\n      type,\n      id: chance.word(),\n    };\n\n    if (chance.integer() % 2 === 0) {\n      field.validation = 'required';\n    }\n    if (type === 'radio') {\n      field.options = createRandomOptions();\n    }\n    if (type === 'textArea' || type === 'input') {\n      field.placeholder = chance.word();\n    }\n\n    fields[counter] = field;\n  }\n  jsonForm[name] = {};\n  jsonForm[name].fields = fields;\n  return jsonForm;\n};\n\ndescribe('DynamicForm', () => {\n  let wrapper;\n  const setRequest = jest.fn();\n  const testJson = generateTestFormJson();\n  const route = jest.fn();\n  const renderComponent = () =>\n    shallow(\n      <DynamicFormComponent\n        jsonForm={() => testJson}\n        setRequest={setRequest}\n        form={Object.keys(testJson)[0]}\n        route={() => {\n          route();\n        }}\n      />,\n    );\n\n  beforeEach(() => {\n    wrapper = renderComponent();\n  });\n\n  it('is wrapped in a Segment', () => {\n    expect(wrapper.type()).toEqual(Segment);\n  });\n\n  it('is styled as a padded Segment', () => {\n    expect(wrapper.props().padded).toBeTruthy();\n  });\n\n  describe('header', () => {\n    let header;\n\n    beforeEach(() => {\n      header = wrapper.childAt(0);\n    });\n\n    it('is a header', () => {\n      expect(header.type()).toEqual(Header);\n    });\n\n    it('is has a large size', () => {\n      expect(header.props().size).toEqual('large');\n    });\n\n    it('is the correct text in the header', () => {\n      expect(header.childAt(0).debug()).toEqual(Object.keys(testJson)[0]);\n    });\n  });\n\n  describe('form', () => {\n    it('is a form', () => {\n      expect(wrapper.childAt(1).type()).toEqual(Form);\n    });\n\n    describe('form data', () => {\n      wrapper = renderComponent();\n      testJson[Object.keys(testJson)[0]].fields.forEach((field) => {\n        if (field.validation) {\n          const fail = chance.integer() % 2;\n          let count = 0;\n          const form = wrapper.childAt(1);\n          const segmentOfFields = form.childAt(0);\n          it(`field ${count} is correct`, () => {\n            const label = segmentOfFields.childAt(count).childAt(0);\n            if (field.validation) {\n              expect(label.text()).toEqual(` * ${field.name}`);\n            } else {\n              expect(label.text()).toEqual(field.name);\n            }\n            expect(\n              wrapper\n                .childAt(1)\n                .childAt(0)\n                .childAt(count)\n                .childAt(1)\n                .props().name === field.name,\n            );\n            if (field.type === 'checkbox') {\n              expect(\n                wrapper\n                  .childAt(1)\n                  .childAt(0)\n                  .childAt(count)\n                  .childAt(1)\n                  .type(),\n              ).toEqual(Checkbox);\n            }\n            if (field.type === 'radio') {\n              expect(\n                wrapper\n                  .childAt(1)\n                  .childAt(0)\n                  .childAt(count)\n                  .childAt(1)\n                  .type(),\n              ).toEqual(Radio);\n\n              if (fail) {\n                const state = { errors: {} };\n                state.errors[field.id] = 'Radio Button Not Selected';\n                wrapper.setState(state);\n                wrapper.update();\n                expect(\n                  wrapper\n                    .childAt(1)\n                    .childAt(0)\n                    .childAt(count)\n                    .find(InlineErrorComponent)\n                    .props().text,\n                ).toEqual('Radio Button Not Selected');\n              }\n            }\n            if (field.type === 'textArea') {\n              expect(\n                wrapper\n                  .childAt(1)\n                  .childAt(0)\n                  .childAt(count)\n                  .childAt(1)\n                  .type(),\n              ).toEqual(TextArea);\n\n              if (fail) {\n                const state = { errors: {} };\n                state.errors[field.id] = 'Empty Text Box';\n                wrapper.setState(state);\n                wrapper.update();\n                expect(\n                  wrapper\n                    .childAt(1)\n                    .childAt(0)\n                    .childAt(count)\n                    .find(InlineErrorComponent)\n                    .props().text,\n                ).toEqual('Empty Text Box');\n              }\n            }\n            if (field.type === 'dropDown') {\n              expect(\n                wrapper\n                  .childAt(1)\n                  .childAt(0)\n                  .childAt(count)\n                  .childAt(1)\n                  .type(),\n              ).toEqual(Dropdown);\n\n              if (fail) {\n                const state = { errors: {} };\n                state.errors[field.id] = 'Nothing is Selected';\n                wrapper.setState(state);\n                wrapper.update();\n                expect(\n                  wrapper\n                    .childAt(1)\n                    .childAt(0)\n                    .childAt(count)\n                    .find(InlineErrorComponent)\n                    .props().text,\n                ).toEqual('Nothing is Selected');\n              }\n            }\n\n            if (field.type === 'input') {\n              expect(\n                wrapper\n                  .childAt(1)\n                  .childAt(0)\n                  .childAt(count)\n                  .childAt(1)\n                  .type(),\n              ).toEqual(Input);\n\n              if (fail) {\n                const state = { errors: {} };\n                state.errors[field.id] = 'Empty Input';\n                wrapper.setState(state);\n                wrapper.update();\n                expect(\n                  wrapper\n                    .childAt(1)\n                    .childAt(0)\n                    .childAt(count)\n                    .find(InlineErrorComponent)\n                    .props().text,\n                ).toEqual('Empty Input');\n              }\n            }\n            count += 1;\n          });\n        }\n      });\n    });\n  });\n\n  describe('Submit Button', () => {\n    let submitSegment;\n\n    beforeEach(() => {\n      submitSegment = wrapper.childAt(1).childAt(1);\n    });\n\n    it('It is a segment', () => {\n      expect(submitSegment.type()).toEqual(Segment);\n    });\n\n    it('There is a button in the segment', () => {\n      const button = submitSegment.childAt(0);\n      expect(button.type()).toEqual(Button);\n    });\n  });\n});\n"]}