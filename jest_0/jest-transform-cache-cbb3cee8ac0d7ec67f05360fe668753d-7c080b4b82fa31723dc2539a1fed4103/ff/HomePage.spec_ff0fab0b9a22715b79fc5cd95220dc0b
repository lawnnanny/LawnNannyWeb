dbb2db07c56403ec8691f2adabbe3ab4
'use strict';

var _enzyme = require('enzyme');

var _semanticUiReact = require('semantic-ui-react');

var _chance = require('chance');

var _chance2 = _interopRequireDefault(_chance);

var _react = require('react');

var _react2 = _interopRequireDefault(_react);

var _HomePage = require('../../../src/components/pages/HomePage');

var _HomePage2 = _interopRequireDefault(_HomePage);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

describe('Home Page', function () {
  var wrapper = void 0,
      chance = void 0;

  var renderComponent = function renderComponent() {
    var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    return (0, _enzyme.shallow)(_react2.default.createElement(_HomePage2.default, {
      setEmail: props.setEmail || jest.fn(),
      setPassword: props.setPassword || jest.fn(),
      setFirstName: props.setFirstName || jest.fn(),
      setLastName: props.setLastName || jest.fn(),
      setPasswordRepeat: props.setPasswordRepeat || jest.fn(),
      setAddress: props.setAddress || jest.fn(),
      setCity: props.setCity || jest.fn(),
      setAddressState: props.setAddressState || jest.fn(),
      setZipcode: props.setZipcode || jest.fn(),
      openLoginModal: props.openLoginModal || jest.fn(),
      closeLoginModal: props.closeLoginModal || jest.fn(),
      isLoginModalOpen: props.isLoginModalOpen || chance.bool(),
      openSignupModal: props.openSignupModal || jest.fn(),
      closeSignupModal: props.closeSignupModal || jest.fn(),
      isSignupModalOpen: props.isSignupModalOpen || chance.bool()
    }));
  };

  beforeEach(function () {
    chance = Chance();
    wrapper = renderComponent().childAt(0);
  });

  it('is wrapped in a div', function () {
    expect(wrapper.type()).toEqual('div');
  });

  describe('Navbar', function () {
    var navbar = void 0;

    beforeEach(function () {
      navbar = wrapper.childAt(0);
    });

    it('is a menu', function () {
      expect(navbar.type()).toEqual(_semanticUiReact.Menu);
    });

    it('is styled as a secondary menu', function () {
      expect(navbar.props().secondary).toBeTruthy();
    });

    describe('Login/Signup button container', function () {
      var loginSignupButtonContainer = void 0;

      beforeEach(function () {
        loginSignupButtonContainer = navbar.childAt(0);
      });

      it('is a menu subcomponent', function () {
        expect(loginSignupButtonContainer.type()).toEqual(_semanticUiReact.Menu.Menu);
      });

      it('is positioned correctly', function () {
        expect(loginSignupButtonContainer.props().position).toEqual('right');
      });

      describe('Login Modal', function () {
        var loginModal = void 0;

        beforeEach(function () {
          loginModal = loginSignupButtonContainer.childAt(0);
        });

        it('is a modal', function () {
          expect(loginModal.type()).toEqual(_semanticUiReact.Modal);
        });

        it('is a mini modal', function () {
          expect(loginModal.props().size).toEqual('mini');
        });

        it('closes the model when closed', function () {
          var mockCloseLoginModal = jest.fn();

          wrapper = renderComponent({
            closeLoginModal: mockCloseLoginModal
          }).childAt(0);
          navbar = wrapper.childAt(0);
          loginSignupButtonContainer = navbar.childAt(0);
          loginModal = loginSignupButtonContainer.childAt(0);

          var loginModalOnCloseHandler = loginModal.props().onClose;

          loginModalOnCloseHandler();

          expect(mockCloseLoginModal).toHaveBeenCalledTimes(1);
        });

        it('displays a close modal button', function () {
          expect(loginModal.props().closeIcon).toBeTruthy();
        });

        describe('Login Modal trigger', function () {
          var loginModalTrigger = void 0;

          beforeEach(function () {
            loginModalTrigger = (0, _enzyme.shallow)(loginModal.props().trigger);
          });

          it('is a menu item', function () {
            var expectedType = (0, _enzyme.shallow)(_react2.default.createElement(_semanticUiReact.Menu.Item, { onClick: jest.fn() })).type();

            expect(loginModalTrigger.type()).toEqual(expectedType);
          });

          it('opens the modal when clicked', function () {
            var mockOpenLoginModal = jest.fn();

            wrapper = renderComponent({
              openLoginModal: mockOpenLoginModal
            }).childAt(0);
            navbar = wrapper.childAt(0);
            loginSignupButtonContainer = navbar.childAt(0);
            loginModal = loginSignupButtonContainer.childAt(0);
            loginModalTrigger = (0, _enzyme.shallow)(loginModal.props().trigger);

            var loginModalTriggerOnClickHandler = loginModalTrigger.props().onClick;

            loginModalTriggerOnClickHandler();

            expect(mockOpenLoginModal).toHaveBeenCalledTimes(1);
          });

          it('displays the correct word', function () {
            var loginModalTriggerText = loginModalTrigger.childAt(0);

            expect(loginModalTriggerText.text()).toEqual('Login');
          });
        });

        describe('Login Modal Header', function () {
          var loginModalHeader = void 0;

          beforeEach(function () {
            loginModalHeader = loginModal.childAt(0);
          });

          it('is a modal header', function () {
            expect(loginModalHeader.type()).toEqual(_semanticUiReact.Modal.Header);
          });

          it('displays the correct text', function () {
            var loginModalHeaderText = loginModalHeader.childAt(0);

            expect(loginModalHeaderText.text()).toEqual('Welcome Back!');
          });
        });

        describe('Login Modal Description', function () {
          var loginModalDescription = void 0;

          beforeEach(function () {
            loginModalDescription = loginModal.childAt(1);
          });

          it('is a modal description', function () {
            expect(loginModalDescription.type()).toEqual(_semanticUiReact.Modal.Description);
          });

          describe('Login Modal Description Grid', function () {
            var loginModalDescriptionGrid = void 0;

            beforeEach(function () {
              loginModalDescriptionGrid = loginModalDescription.childAt(0);
            });

            it('is a grid', function () {
              expect(loginModalDescriptionGrid.type()).toEqual(_semanticUiReact.Grid);
            });

            it('contains three rows', function () {
              var loginModalDescriptionGridRows = loginModalDescriptionGrid.children();

              loginModalDescriptionGridRows.forEach(function (row) {
                expect(row.type()).toEqual(_semanticUiReact.Grid.Row);
              });
            });

            it('contains a row for the login button that is centered', function () {
              var loginButtonRow = loginModalDescriptionGrid.childAt(2);

              expect(loginButtonRow.props().centered).toBeTruthy();
            });
          });
        });
      });
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkhvbWVQYWdlLnNwZWMuanMiXSwibmFtZXMiOlsiZGVzY3JpYmUiLCJ3cmFwcGVyIiwiY2hhbmNlIiwicmVuZGVyQ29tcG9uZW50IiwicHJvcHMiLCJzZXRFbWFpbCIsImplc3QiLCJmbiIsInNldFBhc3N3b3JkIiwic2V0Rmlyc3ROYW1lIiwic2V0TGFzdE5hbWUiLCJzZXRQYXNzd29yZFJlcGVhdCIsInNldEFkZHJlc3MiLCJzZXRDaXR5Iiwic2V0QWRkcmVzc1N0YXRlIiwic2V0WmlwY29kZSIsIm9wZW5Mb2dpbk1vZGFsIiwiY2xvc2VMb2dpbk1vZGFsIiwiaXNMb2dpbk1vZGFsT3BlbiIsImJvb2wiLCJvcGVuU2lnbnVwTW9kYWwiLCJjbG9zZVNpZ251cE1vZGFsIiwiaXNTaWdudXBNb2RhbE9wZW4iLCJiZWZvcmVFYWNoIiwiQ2hhbmNlIiwiY2hpbGRBdCIsIml0IiwiZXhwZWN0IiwidHlwZSIsInRvRXF1YWwiLCJuYXZiYXIiLCJNZW51Iiwic2Vjb25kYXJ5IiwidG9CZVRydXRoeSIsImxvZ2luU2lnbnVwQnV0dG9uQ29udGFpbmVyIiwicG9zaXRpb24iLCJsb2dpbk1vZGFsIiwiTW9kYWwiLCJzaXplIiwibW9ja0Nsb3NlTG9naW5Nb2RhbCIsImxvZ2luTW9kYWxPbkNsb3NlSGFuZGxlciIsIm9uQ2xvc2UiLCJ0b0hhdmVCZWVuQ2FsbGVkVGltZXMiLCJjbG9zZUljb24iLCJsb2dpbk1vZGFsVHJpZ2dlciIsInRyaWdnZXIiLCJleHBlY3RlZFR5cGUiLCJtb2NrT3BlbkxvZ2luTW9kYWwiLCJsb2dpbk1vZGFsVHJpZ2dlck9uQ2xpY2tIYW5kbGVyIiwib25DbGljayIsImxvZ2luTW9kYWxUcmlnZ2VyVGV4dCIsInRleHQiLCJsb2dpbk1vZGFsSGVhZGVyIiwiSGVhZGVyIiwibG9naW5Nb2RhbEhlYWRlclRleHQiLCJsb2dpbk1vZGFsRGVzY3JpcHRpb24iLCJEZXNjcmlwdGlvbiIsImxvZ2luTW9kYWxEZXNjcmlwdGlvbkdyaWQiLCJHcmlkIiwibG9naW5Nb2RhbERlc2NyaXB0aW9uR3JpZFJvd3MiLCJjaGlsZHJlbiIsImZvckVhY2giLCJyb3ciLCJSb3ciLCJsb2dpbkJ1dHRvblJvdyIsImNlbnRlcmVkIl0sIm1hcHBpbmdzIjoiOztBQUFBOztBQUNBOztBQUNBOzs7O0FBQ0E7Ozs7QUFDQTs7Ozs7O0FBRUFBLFNBQVMsV0FBVCxFQUFzQixZQUFNO0FBQzFCLE1BQUlDLGdCQUFKO0FBQUEsTUFDRUMsZUFERjs7QUFHQSxNQUFNQyxrQkFBa0IsU0FBbEJBLGVBQWtCO0FBQUEsUUFBQ0MsS0FBRCx1RUFBUyxFQUFUO0FBQUEsV0FDdEIscUJBQ0UsOEJBQUMsa0JBQUQ7QUFDRSxnQkFBVUEsTUFBTUMsUUFBTixJQUFrQkMsS0FBS0MsRUFBTCxFQUQ5QjtBQUVFLG1CQUFhSCxNQUFNSSxXQUFOLElBQXFCRixLQUFLQyxFQUFMLEVBRnBDO0FBR0Usb0JBQWNILE1BQU1LLFlBQU4sSUFBc0JILEtBQUtDLEVBQUwsRUFIdEM7QUFJRSxtQkFBYUgsTUFBTU0sV0FBTixJQUFxQkosS0FBS0MsRUFBTCxFQUpwQztBQUtFLHlCQUFtQkgsTUFBTU8saUJBQU4sSUFBMkJMLEtBQUtDLEVBQUwsRUFMaEQ7QUFNRSxrQkFBWUgsTUFBTVEsVUFBTixJQUFvQk4sS0FBS0MsRUFBTCxFQU5sQztBQU9FLGVBQVNILE1BQU1TLE9BQU4sSUFBaUJQLEtBQUtDLEVBQUwsRUFQNUI7QUFRRSx1QkFBaUJILE1BQU1VLGVBQU4sSUFBeUJSLEtBQUtDLEVBQUwsRUFSNUM7QUFTRSxrQkFBWUgsTUFBTVcsVUFBTixJQUFvQlQsS0FBS0MsRUFBTCxFQVRsQztBQVVFLHNCQUFnQkgsTUFBTVksY0FBTixJQUF3QlYsS0FBS0MsRUFBTCxFQVYxQztBQVdFLHVCQUFpQkgsTUFBTWEsZUFBTixJQUF5QlgsS0FBS0MsRUFBTCxFQVg1QztBQVlFLHdCQUFrQkgsTUFBTWMsZ0JBQU4sSUFBMEJoQixPQUFPaUIsSUFBUCxFQVo5QztBQWFFLHVCQUFpQmYsTUFBTWdCLGVBQU4sSUFBeUJkLEtB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RiwwQkFBMEJHLFFBQTFCLEVBQXRDOztBQUVBRCw0Q0FBOEJFLE9BQTlCLENBQXNDLFVBQUNDLEdBQUQsRUFBUztBQUM3Q25DLHVCQUFPbUMsSUFBSWxDLElBQUosRUFBUCxFQUFtQkMsT0FBbkIsQ0FBMkI2QixzQkFBS0ssR0FBaEM7QUFDRCxlQUZEO0FBR0QsYUFORDs7QUFRQXJDLGVBQUcsc0RBQUgsRUFBMkQsWUFBTTtBQUMvRCxrQkFBTXNDLGlCQUFpQlAsMEJBQTBCaEMsT0FBMUIsQ0FBa0MsQ0FBbEMsQ0FBdkI7O0FBRUFFLHFCQUFPcUMsZUFBZTVELEtBQWYsR0FBdUI2RCxRQUE5QixFQUF3Q2hDLFVBQXhDO0FBQ0QsYUFKRDtBQUtELFdBeEJEO0FBeUJELFNBcENEO0FBcUNELE9BaklEO0FBa0lELEtBakpEO0FBa0pELEdBaktEO0FBa0tELENBcE1EIiwiZmlsZSI6IkhvbWVQYWdlLnNwZWMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBzaGFsbG93IH0gZnJvbSAnZW56eW1lJztcbmltcG9ydCB7IE1lbnUsIE1vZGFsLCBHcmlkIH0gZnJvbSAnc2VtYW50aWMtdWktcmVhY3QnO1xuaW1wb3J0IGNoYW5jZSBmcm9tICdjaGFuY2UnO1xuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBIb21lUGFnZSBmcm9tICcuLi8uLi8uLi9zcmMvY29tcG9uZW50cy9wYWdlcy9Ib21lUGFnZSc7XG5cbmRlc2NyaWJlKCdIb21lIFBhZ2UnLCAoKSA9PiB7XG4gIGxldCB3cmFwcGVyLFxuICAgIGNoYW5jZTtcblxuICBjb25zdCByZW5kZXJDb21wb25lbnQgPSAocHJvcHMgPSB7fSkgPT5cbiAgICBzaGFsbG93KFxuICAgICAgPEhvbWVQYWdlXG4gICAgICAgIHNldEVtYWlsPXtwcm9wcy5zZXRFbWFpbCB8fCBqZXN0LmZuKCl9XG4gICAgICAgIHNldFBhc3N3b3JkPXtwcm9wcy5zZXRQYXNzd29yZCB8fCBqZXN0LmZuKCl9XG4gICAgICAgIHNldEZpcnN0TmFtZT17cHJvcHMuc2V0Rmlyc3ROYW1lIHx8IGplc3QuZm4oKX1cbiAgICAgICAgc2V0TGFzdE5hbWU9e3Byb3BzLnNldExhc3ROYW1lIHx8IGplc3QuZm4oKX1cbiAgICAgICAgc2V0UGFzc3dvcmRSZXBlYXQ9e3Byb3BzLnNldFBhc3N3b3JkUmVwZWF0IHx8IGplc3QuZm4oKX1cbiAgICAgICAgc2V0QWRkcmVzcz17cHJvcHMuc2V0QWRkcmVzcyB8fCBqZXN0LmZuKCl9XG4gICAgICAgIHNldENpdHk9e3Byb3BzLnNldENpdHkgfHwgamVzdC5mbigpfVxuICAgICAgICBzZXRBZGRyZXNzU3RhdGU9e3Byb3BzLnNldEFkZHJlc3NTdGF0ZSB8fCBqZXN0LmZuKCl9XG4gICAgICAgIHNldFppcGNvZGU9e3Byb3BzLnNldFppcGNvZGUgfHwgamVzdC5mbigpfVxuICAgICAgICBvcGVuTG9naW5Nb2RhbD17cHJvcHMub3BlbkxvZ2luTW9kYWwgfHwgamVzdC5mbigpfVxuICAgICAgICBjbG9zZUxvZ2luTW9kYWw9e3Byb3BzLmNsb3NlTG9naW5Nb2RhbCB8fCBqZXN0LmZuKCl9XG4gICAgICAgIGlzTG9naW5Nb2RhbE9wZW49e3Byb3BzLmlzTG9naW5Nb2RhbE9wZW4gfHwgY2hhbmNlLmJvb2woKX1cbiAgICAgICAgb3BlblNpZ251cE1vZGFsPXtwcm9wcy5vcGVuU2lnbnVwTW9kYWwgfHwgamVzdC5mbigpfVxuICAgICAgICBjbG9zZVNpZ251cE1vZGFsPXtwcm9wcy5jbG9zZVNpZ251cE1vZGFsIHx8IGplc3QuZm4oKX1cbiAgICAgICAgaXNTaWdudXBNb2RhbE9wZW49e3Byb3BzLmlzU2lnbnVwTW9kYWxPcGVuIHx8IGNoYW5jZS5ib29sKCl9XG4gICAgICAvPixcbiAgICApO1xuXG4gIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgIGNoYW5jZSA9IENoYW5jZSgpO1xuICAgIHdyYXBwZXIgPSByZW5kZXJDb21wb25lbnQoKS5jaGlsZEF0KDApO1xuICB9KTtcblxuICBpdCgnaXMgd3JhcHBlZCBpbiBhIGRpdicsICgpID0+IHtcbiAgICBleHBlY3Qod3JhcHBlci50eXBlKCkpLnRvRXF1YWwoJ2RpdicpO1xuICB9KTtcblxuICBkZXNjcmliZSgnTmF2YmFyJywgKCkgPT4ge1xuICAgIGxldCBuYXZiYXI7XG5cbiAgICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICAgIG5hdmJhciA9IHdyYXBwZXIuY2hpbGRBdCgwKTtcbiAgICB9KTtcblxuICAgIGl0KCdpcyBhIG1lbnUnLCAoKSA9PiB7XG4gICAgICBleHBlY3QobmF2YmFyLnR5cGUoKSkudG9FcXVhbChNZW51KTtcbiAgICB9KTtcblxuICAgIGl0KCdpcyBzdHlsZWQgYXMgYSBzZWNvbmRhcnkgbWVudScsICgpID0+IHtcbiAgICAgIGV4cGVjdChuYXZiYXIucHJvcHMoKS5zZWNvbmRhcnkpLnRvQmVUcnV0aHkoKTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCdMb2dpbi9TaWdudXAgYnV0dG9uIGNvbnRhaW5lcicsICgpID0+IHtcbiAgICAgIGxldCBsb2dpblNpZ251cEJ1dHRvbkNvbnRhaW5lcjtcblxuICAgICAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgICAgIGxvZ2luU2lnbnVwQnV0dG9uQ29udGFpbmVyID0gbmF2YmFyLmNoaWxkQXQoMCk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ2lzIGEgbWVudSBzdWJjb21wb25lbnQnLCAoKSA9PiB7XG4gICAgICAgIGV4cGVjdChsb2dpblNpZ251cEJ1dHRvbkNvbnRhaW5lci50eXBlKCkpLnRvRXF1YWwoTWVudS5NZW51KTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnaXMgcG9zaXRpb25lZCBjb3JyZWN0bHknLCAoKSA9PiB7XG4gICAgICAgIGV4cGVjdChsb2dpblNpZ251cEJ1dHRvbkNvbnRhaW5lci5wcm9wcygpLnBvc2l0aW9uKS50b0VxdWFsKCdyaWdodCcpO1xuICAgICAgfSk7XG5cbiAgICAgIGRlc2NyaWJlKCdMb2dpbiBNb2RhbCcsICgpID0+IHtcbiAgICAgICAgbGV0IGxvZ2luTW9kYWw7XG5cbiAgICAgICAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgICAgICAgbG9naW5Nb2RhbCA9IGxvZ2luU2lnbnVwQnV0dG9uQ29udGFpbmVyLmNoaWxkQXQoMCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KCdpcyBhIG1vZGFsJywgKCkgPT4ge1xuICAgICAgICAgIGV4cGVjdChsb2dpbk1vZGFsLnR5cGUoKSkudG9FcXVhbChNb2RhbCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KCdpcyBhIG1pbmkgbW9kYWwnLCAoKSA9PiB7XG4gICAgICAgICAgZXhwZWN0KGxvZ2luTW9kYWwucHJvcHMoKS5zaXplKS50b0VxdWFsKCdtaW5pJyk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KCdjbG9zZXMgdGhlIG1vZGVsIHdoZW4gY2xvc2VkJywgKCkgPT4ge1xuICAgICAgICAgIGNvbnN0IG1vY2tDbG9zZUxvZ2luTW9kYWwgPSBqZXN0LmZuKCk7XG5cbiAgICAgICAgICB3cmFwcGVyID0gcmVuZGVyQ29tcG9uZW50KHtcbiAgICAgICAgICAgIGNsb3NlTG9naW5Nb2RhbDogbW9ja0Nsb3NlTG9naW5Nb2RhbCxcbiAgICAgICAgICB9KS5jaGlsZEF0KDApO1xuICAgICAgICAgIG5hdmJhciA9IHdyYXBwZXIuY2hpbGRBdCgwKTtcbiAgICAgICAgICBsb2dpblNpZ251cEJ1dHRvbkNvbnRhaW5lciA9IG5hdmJhci5jaGlsZEF0KDApO1xuICAgICAgICAgIGxvZ2luTW9kYWwgPSBsb2dpblNpZ251cEJ1dHRvbkNvbnRhaW5lci5jaGlsZEF0KDApO1xuXG4gICAgICAgICAgY29uc3QgbG9naW5Nb2RhbE9uQ2xvc2VIYW5kbGVyID0gbG9naW5Nb2RhbC5wcm9wcygpLm9uQ2xvc2U7XG5cbiAgICAgICAgICBsb2dpbk1vZGFsT25DbG9zZUhhbmRsZXIoKTtcblxuICAgICAgICAgIGV4cGVjdChtb2NrQ2xvc2VMb2dpbk1vZGFsKS50b0hhdmVCZWVuQ2FsbGVkVGltZXMoMSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KCdkaXNwbGF5cyBhIGNsb3NlIG1vZGFsIGJ1dHRvbicsICgpID0+IHtcbiAgICAgICAgICBleHBlY3QobG9naW5Nb2RhbC5wcm9wcygpLmNsb3NlSWNvbikudG9CZVRydXRoeSgpO1xuICAgICAgICB9KTtcblxuICAgICAgICBkZXNjcmliZSgnTG9naW4gTW9kYWwgdHJpZ2dlcicsICgpID0+IHtcbiAgICAgICAgICBsZXQgbG9naW5Nb2RhbFRyaWdnZXI7XG5cbiAgICAgICAgICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICAgICAgICAgIGxvZ2luTW9kYWxUcmlnZ2VyID0gc2hhbGxvdyhsb2dpbk1vZGFsLnByb3BzKCkudHJpZ2dlcik7XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICBpdCgnaXMgYSBtZW51IGl0ZW0nLCAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBleHBlY3RlZFR5cGUgPSBzaGFsbG93KDxNZW51Lkl0ZW0gb25DbGljaz17amVzdC5mbigpfSAvPikudHlwZSgpO1xuXG4gICAgICAgICAgICBleHBlY3QobG9naW5Nb2RhbFRyaWdnZXIudHlwZSgpKS50b0VxdWFsKGV4cGVjdGVkVHlwZSk7XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICBpdCgnb3BlbnMgdGhlIG1vZGFsIHdoZW4gY2xpY2tlZCcsICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG1vY2tPcGVuTG9naW5Nb2RhbCA9IGplc3QuZm4oKTtcblxuICAgICAgICAgICAgd3JhcHBlciA9IHJlbmRlckNvbXBvbmVudCh7XG4gICAgICAgICAgICAgIG9wZW5Mb2dpbk1vZGFsOiBtb2NrT3BlbkxvZ2luTW9kYWwsXG4gICAgICAgICAgICB9KS5jaGlsZEF0KDApO1xuICAgICAgICAgICAgbmF2YmFyID0gd3JhcHBlci5jaGlsZEF0KDApO1xuICAgICAgICAgICAgbG9naW5TaWdudXBCdXR0b25Db250YWluZXIgPSBuYXZiYXIuY2hpbGRBdCgwKTtcbiAgICAgICAgICAgIGxvZ2luTW9kYWwgPSBsb2dpblNpZ251cEJ1dHRvbkNvbnRhaW5lci5jaGlsZEF0KDApO1xuICAgICAgICAgICAgbG9naW5Nb2RhbFRyaWdnZXIgPSBzaGFsbG93KGxvZ2luTW9kYWwucHJvcHMoKS50cmlnZ2VyKTtcblxuICAgICAgICAgICAgY29uc3QgbG9naW5Nb2RhbFRyaWdnZXJPbkNsaWNrSGFuZGxlciA9IGxvZ2luTW9kYWxUcmlnZ2VyLnByb3BzKCkub25DbGljaztcblxuICAgICAgICAgICAgbG9naW5Nb2RhbFRyaWdnZXJPbkNsaWNrSGFuZGxlcigpO1xuXG4gICAgICAgICAgICBleHBlY3QobW9ja09wZW5Mb2dpbk1vZGFsKS50b0hhdmVCZWVuQ2FsbGVkVGltZXMoMSk7XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICBpdCgnZGlzcGxheXMgdGhlIGNvcnJlY3Qgd29yZCcsICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGxvZ2luTW9kYWxUcmlnZ2VyVGV4dCA9IGxvZ2luTW9kYWxUcmlnZ2VyLmNoaWxkQXQoMCk7XG5cbiAgICAgICAgICAgIGV4cGVjdChsb2dpbk1vZGFsVHJpZ2dlclRleHQudGV4dCgpKS50b0VxdWFsKCdMb2dpbicpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcblxuICAgICAgICBkZXNjcmliZSgnTG9naW4gTW9kYWwgSGVhZGVyJywgKCkgPT4ge1xuICAgICAgICAgIGxldCBsb2dpbk1vZGFsSGVhZGVyO1xuXG4gICAgICAgICAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgICAgICAgICBsb2dpbk1vZGFsSGVhZGVyID0gbG9naW5Nb2RhbC5jaGlsZEF0KDApO1xuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgaXQoJ2lzIGEgbW9kYWwgaGVhZGVyJywgKCkgPT4ge1xuICAgICAgICAgICAgZXhwZWN0KGxvZ2luTW9kYWxIZWFkZXIudHlwZSgpKS50b0VxdWFsKE1vZGFsLkhlYWRlcik7XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICBpdCgnZGlzcGxheXMgdGhlIGNvcnJlY3QgdGV4dCcsICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGxvZ2luTW9kYWxIZWFkZXJUZXh0ID0gbG9naW5Nb2RhbEhlYWRlci5jaGlsZEF0KDApO1xuXG4gICAgICAgICAgICBleHBlY3QobG9naW5Nb2RhbEhlYWRlclRleHQudGV4dCgpKS50b0VxdWFsKCdXZWxjb21lIEJhY2shJyk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGRlc2NyaWJlKCdMb2dpbiBNb2RhbCBEZXNjcmlwdGlvbicsICgpID0+IHtcbiAgICAgICAgICBsZXQgbG9naW5Nb2RhbERlc2NyaXB0aW9uO1xuXG4gICAgICAgICAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgICAgICAgICBsb2dpbk1vZGFsRGVzY3JpcHRpb24gPSBsb2dpbk1vZGFsLmNoaWxkQXQoMSk7XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICBpdCgnaXMgYSBtb2RhbCBkZXNjcmlwdGlvbicsICgpID0+IHtcbiAgICAgICAgICAgIGV4cGVjdChsb2dpbk1vZGFsRGVzY3JpcHRpb24udHlwZSgpKS50b0VxdWFsKE1vZGFsLkRlc2NyaXB0aW9uKTtcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIGRlc2NyaWJlKCdMb2dpbiBNb2RhbCBEZXNjcmlwdGlvbiBHcmlkJywgKCkgPT4ge1xuICAgICAgICAgICAgbGV0IGxvZ2luTW9kYWxEZXNjcmlwdGlvbkdyaWQ7XG5cbiAgICAgICAgICAgIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgICAgICAgICAgICBsb2dpbk1vZGFsRGVzY3JpcHRpb25HcmlkID0gbG9naW5Nb2RhbERlc2NyaXB0aW9uLmNoaWxkQXQoMCk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgaXQoJ2lzIGEgZ3JpZCcsICgpID0+IHtcbiAgICAgICAgICAgICAgZXhwZWN0KGxvZ2luTW9kYWxEZXNjcmlwdGlvbkdyaWQudHlwZSgpKS50b0VxdWFsKEdyaWQpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGl0KCdjb250YWlucyB0aHJlZSByb3dzJywgKCkgPT4ge1xuICAgICAgICAgICAgICBjb25zdCBsb2dpbk1vZGFsRGVzY3JpcHRpb25HcmlkUm93cyA9IGxvZ2luTW9kYWxEZXNjcmlwdGlvbkdyaWQuY2hpbGRyZW4oKTtcblxuICAgICAgICAgICAgICBsb2dpbk1vZGFsRGVzY3JpcHRpb25HcmlkUm93cy5mb3JFYWNoKChyb3cpID0+IHtcbiAgICAgICAgICAgICAgICBleHBlY3Qocm93LnR5cGUoKSkudG9FcXVhbChHcmlkLlJvdyk7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGl0KCdjb250YWlucyBhIHJvdyBmb3IgdGhlIGxvZ2luIGJ1dHRvbiB0aGF0IGlzIGNlbnRlcmVkJywgKCkgPT4ge1xuICAgICAgICAgICAgICBjb25zdCBsb2dpbkJ1dHRvblJvdyA9IGxvZ2luTW9kYWxEZXNjcmlwdGlvbkdyaWQuY2hpbGRBdCgyKTtcblxuICAgICAgICAgICAgICBleHBlY3QobG9naW5CdXR0b25Sb3cucHJvcHMoKS5jZW50ZXJlZCkudG9CZVRydXRoeSgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xufSk7XG4iXX0=